import{j as e,F as s,J as a}from"./index-B8zUDzaw.js";import{r as l}from"./react-vendor-B8CcSR15.js";import{B as r}from"./button-BqHev08D.js";import{C as n,a as t,b as i,c,d as o}from"./card-CO5jCfvi.js";import{I as m}from"./input-DdDYT5kL.js";import{L as d,S as x,d as h,e as j,f as p,g as u,A as N,h as f,i as g,j as b,k as v,l as y,n as w}from"./alert-dialog-DYDHAMIW.js";import{H as C}from"./Header-B9S4FmQp.js";import{s as S,S as k}from"./storage-GRehWpHF.js";import{g as z}from"./ui-vendor-CRevUvkf.js";import"./index-CtqvmGU1.js";const R=({onBack:R,onComplete:F,initialPhoneNumber:J=""})=>{const[O,I]=l.useState({name:"",phoneNumber:J,organization:"",medicalRole:""}),[B,H]=l.useState(!1);l.useEffect(()=>{J&&I(e=>({...e,phoneNumber:J}))},[J]);const P=(e,s)=>{I(a=>({...a,[e]:s}))},U=()=>""!==O.name.trim()&&""!==O.phoneNumber.trim()&&""!==O.organization&&""!==O.medicalRole;return e.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-100 dark:bg-slate-900",children:[e.jsx(C,{}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsxs(n,{className:"w-full max-w-md",children:[e.jsxs(t,{className:"text-center",children:[e.jsx(i,{className:"text-2xl font-bold",children:"회원정보 입력"}),e.jsx(c,{children:"회원가입을 위한 정보를 입력해주세요"})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"name",className:"text-sm font-medium",children:["이름 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"name",type:"text",placeholder:"이름을 입력해주세요",value:O.name,onChange:e=>P("name",e.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"phoneNumber",className:"text-sm font-medium",children:["휴대폰 번호 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"phoneNumber",type:"tel",placeholder:"휴대폰 번호를 입력해주세요 ('-' 제외)",value:O.phoneNumber,onChange:e=>P("phoneNumber",e.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"organization",className:"text-sm font-medium",children:["소속기관 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(x,{value:O.organization,onValueChange:e=>P("organization",e),children:[e.jsx(h,{children:e.jsx(j,{placeholder:"소속기관을 선택해주세요"})}),e.jsx(p,{children:["앳플로우"].map(s=>e.jsx(u,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"medicalRole",className:"text-sm font-medium",children:["의료진 구분 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(x,{value:O.medicalRole,onValueChange:e=>P("medicalRole",e),children:[e.jsx(h,{children:e.jsx(j,{placeholder:"의료진 구분을 선택해주세요"})}),e.jsx(p,{children:["의사","간호사","기타"].map(s=>e.jsx(u,{value:s,children:s},s))})]})]})]}),e.jsx(r,{onClick:()=>{U()?H(!0):a.error("모든 필수 항목을 입력해주세요.")},className:"w-full",disabled:!U(),children:"회원가입 완료"}),e.jsxs(r,{variant:"ghost",onClick:R,className:"w-full flex items-center gap-2 text-sm",children:[e.jsx(z,{className:"h-4 w-4"}),"로그인으로 돌아가기"]})]})]})}),e.jsx(s,{}),e.jsx(N,{open:B,onOpenChange:H,children:e.jsxs(f,{children:[e.jsxs(g,{children:[e.jsx(b,{className:"text-center text-xl font-bold text-green-600",children:"환영합니다!"}),e.jsxs(v,{className:"text-center text-base py-4",children:["서비스 홈으로 이동하여",e.jsx("br",{}),"TDM 진행할 환자 정보를 등록해주세요."]})]}),e.jsx(y,{className:"flex justify-center",children:e.jsx(w,{onClick:()=>{try{const e=JSON.parse(window.localStorage.getItem("tdmfriends:registeredUsers")||"[]");e.includes(O.phoneNumber)||(e.push(O.phoneNumber),window.localStorage.setItem("tdmfriends:registeredUsers",JSON.stringify(e)));const s={name:O.name,email:"",phone:O.phoneNumber,organization:O.organization,role:"의사"===O.medicalRole?"doctor":"간호사"===O.medicalRole?"nurse":"other"};S.setJSON(k.userProfile,s)}catch(e){a.error("회원가입 정보 저장 중 오류가 발생했습니다.")}H(!1),F()},className:"w-full max-w-xs",children:"확인"})})]})})]})};export{R as default};
